{"version":3,"sources":["webpack:///./js/tamplates/imgList.hbs","webpack:///./js/components/api.js","webpack:///./js/components/onScreen.js","webpack:///./js/components/refs.js","webpack:///./js/components/markupHandler.js","webpack:///./js/components/clickClose.js","webpack:///./index.js","webpack:///./js/components/clickItem.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","axios","defaults","baseURL","getImg","userRequest","numberPage","get","os","OnScreen","tolerance","debounce","window","refs","body","document","querySelector","searchForm","galleryList","notFound","lightbox","loadMore","markupHandler","res","imgCard","handleKeyEsc","event","key","classList","contains","remove","removeEventListener","requestHavePage","createMarkup","then","style","transform","readyMarkup","hits","total","innerHTML","textContent","Math","ceil","console","log","catch","err","hendleClickLoadMore","add","insertAdjacentHTML","addEventListener","preventDefault","target","firstElementChild","value","nodeName","children","dataset","largesrc","alt","on","element"],"mappings":"8EAAA,IAAIA,EAAa,EAAQ,QAEzBC,EAAOC,SAAWF,EAAoB,SAAKA,GAAYG,SAAS,CAAC,EAAI,SAASC,EAAUC,EAAOC,EAAQC,EAASC,GAC5G,IAAIC,EAAQC,EAAiB,MAAVL,EAAiBA,EAAUD,EAAUO,aAAe,GAAKC,EAAOR,EAAUS,MAAMC,cAAeC,EAAO,WAAYC,EAAOZ,EAAUa,iBAAkBC,EAAiBd,EAAUc,gBAAkB,SAASC,EAAQC,GAClO,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,IAKtB,MAAO,kEACHJ,SAASP,EAAmI,OAAzHA,EAASS,EAAeZ,EAAQ,kBAA8B,MAAVD,EAAiBa,EAAeb,EAAO,gBAAkBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,eAAe,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACxU,oBACAO,SAASP,EAAqI,OAA3HA,EAASS,EAAeZ,EAAQ,mBAA+B,MAAVD,EAAiBa,EAAeb,EAAO,iBAAmBA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,gBAAgB,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC3U,UACAO,SAASP,EAAmH,OAAzGA,EAASS,EAAeZ,EAAQ,UAAsB,MAAVD,EAAiBa,EAAeb,EAAO,QAAUA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,QAAUC,GACjT,wGACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACnT,6EACAO,SAASP,EAAqH,OAA3GA,EAASS,EAAeZ,EAAQ,WAAuB,MAAVD,EAAiBa,EAAeb,EAAO,SAAWA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,QAAQ,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GACnT,0EACAO,SAASP,EAA2H,OAAjHA,EAASS,EAAeZ,EAAQ,cAA0B,MAAVD,EAAiBa,EAAeb,EAAO,YAAcA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,WAAW,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC5T,iFACAO,SAASP,EAA6H,OAAnHA,EAASS,EAAeZ,EAAQ,eAA2B,MAAVD,EAAiBa,EAAeb,EAAO,aAAeA,IAAmBI,EAASG,KAA2BG,EAASN,EAAOe,KAAKd,EAAO,CAAC,KAAO,YAAY,KAAO,GAAG,KAAOF,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,IAAI,IAAM,CAAC,KAAO,EAAE,OAAS,OAASC,GAC/T,iCACJ,SAAW,CAAC,EAAE,YAAY,KAAO,SAASL,EAAUC,EAAOC,EAAQC,EAASC,GAC1E,IAAIiB,EAON,OAA+R,OAAtRA,GAPsBrB,EAAUc,gBAAkB,SAASC,EAAQC,GACtE,GAAIC,OAAOC,UAAUC,eAAeC,KAAKL,EAAQC,GAC/C,OAAOD,EAAOC,KAKWd,EAAQ,QAAQkB,KAAe,MAAVnB,EAAiBA,EAAUD,EAAUO,aAAe,GAAIN,EAAO,CAAC,KAAO,OAAO,KAAO,GAAG,GAAKD,EAAUsB,QAAQ,EAAGlB,EAAM,GAAG,QAAUJ,EAAUuB,KAAK,KAAOnB,EAAK,IAAM,CAAC,MAAQ,CAAC,KAAO,EAAE,OAAS,GAAG,IAAM,CAAC,KAAO,GAAG,OAAS,OAAiBiB,EAAS,IAC/S,SAAU,K,mGChCZG,IAAMC,SAASC,QAAU,2BACzB,IAEaC,EAAS,SAACC,EAAaC,GAClC,OAAOL,IAAMM,IAAN,8CACyCF,EADzC,SAC6DC,EAD7D,wD,YCJIE,EAAK,I,OAAIC,GAAS,CAC7BC,WAAY,IACZC,SAAU,IACVlC,UAAWmC,SCLAC,EAAO,CAClBC,KAAMC,SAASC,cAAc,QAC7BC,WAAYF,SAASC,cAAc,gBACnCE,YAAaH,SAASC,cAAc,oBACpCG,SAAUJ,SAASC,cAAc,cACjCI,SAAUL,SAASC,cAAc,gBACjCK,SAAUN,SAASC,cAAc,kB,qBCJ5B,SAASM,EAAcC,GAC5B,OAAOC,IAAQD,GCKjB,SAASE,EAAaC,GACF,WAAdA,EAAMC,KAAoBd,EAAKO,SAASQ,UAAUC,SAAS,aAC7DhB,EAAKO,SAASQ,UAAUE,OAAO,WAC/BjB,EAAKC,KAAKc,UAAUE,OAAO,aAC3BjB,EAAKC,KAAKiB,oBAAoB,QAASN,ICJ3C,IAAIpB,EAAc,GACdC,EAAa,EACb0B,EAAkB,EA0BtB,SAASC,EAAa5B,GACpBD,EAAOC,EAAaC,GACjB4B,MAAK,SAAAX,GACJV,EAAKI,WAAWkB,MAAMC,UAAY,gBAClC,IAAMC,EAAcf,EAAcC,EAAI1C,KAAKyD,MAEpB,IAAnBf,EAAI1C,KAAK0D,MACX1B,EAAKK,YAAYsB,UAAjB,GAAgCH,EAEhCxB,EAAKM,SAASsB,YAAc,6BAG9BT,EAAkBU,KAAKC,KAAKpB,EAAI1C,KAAK0D,MAAQ,IAEzChB,EAAI1C,KAAK0D,MAAQ,IACnB1B,EAAKQ,SAASO,UAAUE,OAAO,sBAGjCc,QAAQC,IAAR,WACatB,EAAI1C,KAAK0D,MADtB,mBAC8CP,EAD9C,iBAIDc,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MAK9B,SAASC,IACP1C,GAAc,EAEdO,EAAKQ,SAASO,UAAUqB,IAAI,sBAExB3C,EAAa0B,GACfnB,EAAKQ,SAASO,UAAUE,OAAO,sBAGjC1B,EAAOC,EAAaC,GACjB4B,MAAK,SAAAX,GACJ,IAAMc,EAAcf,EAAcC,EAAI1C,KAAKyD,MAC3CzB,EAAKK,YAAYgC,mBAAmB,YAApC,GAAoDb,MAErDS,OAAM,SAAAC,GAAG,OAAIH,QAAQC,IAAIE,MAjE9BlC,EAAKI,WAAWkC,iBAAiB,UAUjC,SAA2BzB,GACzBA,EAAM0B,iBAEN9C,EAAa,EACbD,EAAcqB,EAAM2B,OAAOC,kBAAkBC,MAE7C1C,EAAKM,SAASsB,YAAc,GAC5B5B,EAAKQ,SAASO,UAAUqB,IAAI,sBAER,KAAhB5C,GACF4B,EAAa5B,MAnBjBQ,EAAKK,YAAYiC,iBAAiB,SCV3B,SAAyBzB,GACA,QAA1BA,EAAM2B,OAAOG,WACf3C,EAAKO,SAASQ,UAAUqB,IAAI,WAC5BpC,EAAKC,KAAKc,UAAUqB,IAAI,aAExBpC,EAAKC,KAAKqC,iBAAiB,QAAS1B,GACpCZ,EAAKO,SAASqC,SAAS,GAAGjB,UAA1B,qCAA2Ed,EAAM2B,OAAOK,QAAQC,SAAhG,UAAkHjC,EAAM2B,OAAOO,IAA/H,WDKJ/C,EAAKO,SAAS+B,iBAAiB,SDZ/B,WACEtC,EAAKO,SAASQ,UAAUE,OAAO,WAC/BjB,EAAKC,KAAKc,UAAUE,OAAO,aAC3BjB,EAAKC,KAAKiB,oBAAoB,QAASN,MCWzCQ,EAAa,MAEbzB,EAAGqD,GAAG,QAAS,iBAAiB,SAACC,EAASpC,GACxCsB,OA0CFnC,EAAKQ,SAAS8B,iBAAiB,QAASH,K","file":"main.63d1226f60846f96bba3.js","sourcesContent":["var Handlebars = require(\"../../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"photo-card\\\">\\r\\n  <img class=\\\"photo-card__img\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":36},\"end\":{\"line\":3,\"column\":52}}}) : helper)))\n    + \"\\\" data-largesrc=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":69},\"end\":{\"line\":3,\"column\":86}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"tags\") || (depth0 != null ? lookupProperty(depth0,\"tags\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"tags\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":3,\"column\":93},\"end\":{\"line\":3,\"column\":101}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n  <div class=\\\"stats\\\">\\r\\n    <p class=\\\"stats-item\\\"><i class=\\\"material-icons\\\">thumb_up</i>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":6,\"column\":64},\"end\":{\"line\":6,\"column\":73}}}) : helper)))\n    + \"</p>\\r\\n    <p class=\\\"stats-item\\\"><i class=\\\"material-icons\\\">visibility</i>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":7,\"column\":66},\"end\":{\"line\":7,\"column\":75}}}) : helper)))\n    + \"</p>\\r\\n    <p class=\\\"stats-item\\\"><i class=\\\"material-icons\\\">comment</i>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":8,\"column\":63},\"end\":{\"line\":8,\"column\":75}}}) : helper)))\n    + \"</p>\\r\\n    <p class=\\\"stats-item\\\"><i class=\\\"material-icons\\\">cloud_download</i>\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":70},\"end\":{\"line\":9,\"column\":83}}}) : helper)))\n    + \"</p>\\r\\n  </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":12,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://pixabay.com/api/';\r\nconst apiKey = '17147509-a5fa31b8b32f1069e5373e2b3';\r\n\r\nexport const getImg = (userRequest, numberPage) => {\r\n  return axios.get(\r\n    `?image_type=photo&orientation=horizontal&q=${userRequest}&page=${numberPage}&per_page=16&key=${apiKey}`,\r\n  );\r\n};\r\n","import OnScreen from 'onscreen';\r\n\r\nexport const os = new OnScreen({\r\n  tolerance: -100,\r\n  debounce: 100,\r\n  container: window,\r\n});\r\n","export const refs = {\r\n  body: document.querySelector('body'),\r\n  searchForm: document.querySelector('#search-form'),\r\n  galleryList: document.querySelector('.js-gallery-list'),\r\n  notFound: document.querySelector('.not-found'),\r\n  lightbox: document.querySelector('.js-lightbox'),\r\n  loadMore: document.querySelector('.js-load-more'),\r\n};\r\n","import imgCard from '../tamplates/imgList.hbs';\r\n\r\nexport function markupHandler(res) {\r\n  return imgCard(res);\r\n}\r\n","import { refs } from './refs';\r\n\r\nfunction hendleClickClose() {\r\n  refs.lightbox.classList.remove('is-open');\r\n  refs.body.classList.remove('body-hide');\r\n  refs.body.removeEventListener('keyup', handleKeyEsc);\r\n}\r\n\r\nfunction handleKeyEsc(event) {\r\n  if (event.key === 'Escape' && refs.lightbox.classList.contains('is-open')) {\r\n    refs.lightbox.classList.remove('is-open');\r\n    refs.body.classList.remove('body-hide');\r\n    refs.body.removeEventListener('keyup', handleKeyEsc);\r\n  }\r\n}\r\n\r\nexport { hendleClickClose, handleKeyEsc };\r\n","import './css/styles.css';\nimport { getImg } from './js/components/api';\nimport { os } from './js/components/onScreen';\nimport { refs } from './js/components/refs';\nimport { markupHandler } from './js/components/markupHandler';\nimport { hendleClickClose, handleKeyEsc } from './js/components/clickClose';\nimport { hendleClickItem } from './js/components/clickItem';\n\nlet userRequest = '';\nlet numberPage = 1;\nlet requestHavePage = 0;\n\nrefs.searchForm.addEventListener('submit', hendleUserRequest);\nrefs.galleryList.addEventListener('click', hendleClickItem);\nrefs.lightbox.addEventListener('click', hendleClickClose);\n\ncreateMarkup('  ');\n\nos.on('enter', '.js-load-more', (element, event) => {\n  hendleClickLoadMore();\n});\n\nfunction hendleUserRequest(event) {\n  event.preventDefault();\n\n  numberPage = 1;\n  userRequest = event.target.firstElementChild.value;\n\n  refs.notFound.textContent = '';\n  refs.loadMore.classList.add('load-more-disabled');\n\n  if (userRequest !== '') {\n    createMarkup(userRequest);\n  }\n}\n\nfunction createMarkup(userRequest) {\n  getImg(userRequest, numberPage)\n    .then(res => {\n      refs.searchForm.style.transform = 'translateY(0)';\n      const readyMarkup = markupHandler(res.data.hits);\n\n      if (res.data.total !== 0) {\n        refs.galleryList.innerHTML = `${readyMarkup}`;\n      } else {\n        refs.notFound.textContent = 'No images for your request';\n      }\n\n      requestHavePage = Math.ceil(res.data.total / 16);\n\n      if (res.data.total > 16) {\n        refs.loadMore.classList.remove('load-more-disabled');\n      }\n\n      console.log(\n        `Найдено ${res.data.total} изображений на ${requestHavePage} страницах`,\n      );\n    })\n    .catch(err => console.log(err));\n}\n\nrefs.loadMore.addEventListener('click', hendleClickLoadMore);\n\nfunction hendleClickLoadMore() {\n  numberPage += 1;\n\n  refs.loadMore.classList.add('load-more-disabled');\n\n  if (numberPage < requestHavePage) {\n    refs.loadMore.classList.remove('load-more-disabled');\n  }\n\n  getImg(userRequest, numberPage)\n    .then(res => {\n      const readyMarkup = markupHandler(res.data.hits);\n      refs.galleryList.insertAdjacentHTML('beforeend', `${readyMarkup}`);\n    })\n    .catch(err => console.log(err));\n}\n","import { refs } from './refs';\r\nimport { handleKeyEsc } from './clickClose';\r\n\r\nexport function hendleClickItem(event) {\r\n  if (event.target.nodeName === 'IMG') {\r\n    refs.lightbox.classList.add('is-open');\r\n    refs.body.classList.add('body-hide');\r\n\r\n    refs.body.addEventListener('keyup', handleKeyEsc);\r\n    refs.lightbox.children[1].innerHTML = `<img class=\"lightbox__image\" src=\"${event.target.dataset.largesrc}\" alt=\"${event.target.alt}\" />`;\r\n  }\r\n}\r\n"],"sourceRoot":""}